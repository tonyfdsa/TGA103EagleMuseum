<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>front</title>
<!-- /teleplete -->
<link>
<!-- bookstrapt -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
	crossorigin="anonymous" />
<!-- <link rel="stylesheet" href="./workCss/templete.css"> -->
<link rel="stylesheet" href="./CSS/templete.css">


<style>
body {
	background-color: #fffbdd;
}

.dropMeau {
	position: relative;
	left: 30px;
}
</style>
<link rel="stylesheet" href="./workCss/index.style.css">


</head>


<body>
	<!-- head -->
	<div class="wrap">
		<div class="row d-flex" style="">
			<div class="col-1" alt="大頭貼"> 
				<img src="./img/eagleIcon.jpg" class="min_picture"></IMG>
			</div>
			<div class="col-5">
				<h1 style="text-align: center;">Eagle Museum</h1>
			</div>
			<div class="col-6 row d-flex menu btn-group" id="meau">
				<ul class="drop-down-menu d-flex" style="justify-content: end;">
					<li><a href="#" class="topTag">首頁</a></li>
					<li><a href="#" class="topTag">展覽</a></li>
					<li><a href="#" class="topTag">館藏</a>
						<ul>
							<li class="dropMeau"><a href="#">館藏資訊</a></li>
							<li class="dropMeau"><a href="#">館藏地圖</a></li>
						</ul></li>
					<li><a href="#" class="topTag">活動</a></li>
					<li><a href="#" class="topTag">商城</a>
						<ul>
							<li class="dropMeau"><a href="#">商品列表</a></li>
							<li class="dropMeau"><a href="#">我的購物車</a></li>
							<li class="dropMeau"><a href="#">訂單查詢</a></li>
							<li class="dropMeau"><a href="#">最愛清單</a></li>
						</ul></li>
					<li><a href="#" class="topTag">會員中心</a>
						<ul>
							<li class="dropMeau"><a href="#">會員資料</a></li>
							<li class="dropMeau"><a href="#">訂單資料</a></li>
							<li class="dropMeau"><a href="#">我的收藏</a></li>
						</ul></li>
					<li><a href="#" class="topTag">問題回饋</a>
						
						</li>
				</ul>
			</div>

		</div>
	</div>
	</div>
	</div>



	<!-- <div class="content"> -->
	<!-- banner  upperColumn-->
	<div class="upperColumn" id="topcontent"></div>

	<!-- </div> -->

	<!-- main -->
	<br>

	<div class="main">
		<div class="first">

			<button class="headbtn" id="actives">展覽推薦</button>
			<button class="headbtn" id="news">最新消息</button>

		</div>
		<br>
		<div class="picture">
			
			<div id="activeImage" style="background-image:url(./img/FileHandler.jpg);height:  600px;  display: flex; justify-content: center; align-items: center;">
				<div id="text" style="font-size:60px;padding: 10px;background:#e7e2db91 ;" ></div>
			</div>

			<div class="business.hours">
				<div style="background-color: #FFE4B5;"></div>
				<img id="icon" class="min_picture" src="./img/clock.PNG">
				<div style="background-color: #FFE4B5;"></div>
				<p>今日閉館17.30 開放時間｜週二至週日：09:00～17:00 (週一開館日)

					8/5、8/6大鷹博物館、1F/4F化妝室、B1禮品店均開放至18:30 防疫措施及參觀資訊</P>
			</div>
			<div>		
				<button class="headbtn" id="hotproduct">熱門商品</button>
				<button class="headbtn" id="newproduct">新品上市</button>

			</div>
			<br>

			<div>
				<img id="mainproduct" src="./img/MY HARVEST JOURNEY_banner.jpg" style="width:100%" id="icon"
					title="新品上市">
			</div>
			<br>

			<div class="calendar" style="margin:auto">
				<div class="calendar-header">
					<div class="year-picker">
						<span class="year-change" id="prev-year"> <pre><</pre>
						</span> <span id="year">2022</span> <span class="year-change"
							id="next-year"> <pre>></pre>
						</span>
					</div>
					<br> <span class="month-picker" id="month-picker">February</span>
				</div>
				<div class="calendar-body">
					<div class="calendar-week-day">
						<div>日</div>
						<div>一</div>
						<div>二</div>
						<div>三</div>
						<div>四</div>
						<div>五</div>
						<div>六</div>
					</div>
					<div class="calendar-days"></div>

				</div>

				<div class="month-list"></div>

			</div>
<!-- 			<div> -->
<!-- 				<h2 -->
<!-- 					style="color: red; font-size: 30px; text-decoration: underline; margin-top: 50px; text-align: left;">組員介紹</h2> -->
<!-- 				<img class="min_picture" src="./img/abc.jpg" id="icon" title="panda" /> -->
<!-- 				<span>組長</span> <img class="min_picture" src="./img/abc.jpg" -->
<!-- 					id="icon" title="panda" /> <span>副組長</span> <img -->
<!-- 					class="min_picture" src="./img/abc.jpg" id="icon" title="panda" /> -->
<!-- 				<span>組員1</span> <img class="min_picture" src="./img/abc.jpg" -->
<!-- 					id="icon" title="panda" /> <span>組員2</span> <img -->
<!-- 					class="min_picture" src="./img/abc.jpg" id="icon" title="panda" /> -->
<!-- 				<span>組員3</span> <img class="min_picture" src="./img/abc.jpg" -->
<!-- 					id="icon" title="panda" /> <span>組員4</span> -->

<!-- 			</div> -->


			<!-- footer -->
			<div class="footer">
      <div class="container">
        <div class="row row-line"></div>
        <div class="row d-flex">
          <div class="col-1">
            <img src="./img/profile.png" alt="" class="profile_picture">
          </div>
          <div class="col-3 profile-content">
            <p style="margin: 0;">Yang Yu-Lou</p>
            <p style="margin: 0;">yulou3988@gmail.com</p>
          </div>
          <div class="col-1">
            <img src="./img/profile(1).png" alt="" class="profile_picture">
          </div>
          <div class="col-3 profile-content">
            <p style="margin: 0;">Huang Shih-Syun</p>
            <p style="margin: 0;">tonyfdsa@gmail.com</p>
          </div>
          <div class="col-1">
            <img src="./img/profile(2).png" alt="" class="profile_picture">
          </div>
          <div class="col-3 profile-content">
            <p style="margin: 0;">Li Wei-Huan</p>
            <p style="margin: 0;">r98121010@gmail.com</p>
          </div>
        </div>
        <div class="row row-line"></div>
        <div class="row d-flex">
          <div class="col-1">
            <img src="./img/profile(3).png" alt="" class="profile_picture">
          </div>
          <div class="col-3 profile-content">
            <p style="margin: 0;">Chang wei-chung</p>
            <p style="margin: 0;">enjoylife0711@gmail.com</p>
          </div>
          <div class="col-1">
            <img src="./img/profile(4).png" alt="" class="profile_picture">
          </div>
          <div class="col-3 profile-content">
            <p style="margin: 0;">Ko Jean-You</p>
            <p style="margin: 0;">f2675805@gmail.com</p>
          </div>
          <div class="col-1">
            <img src="./img/profile(5).png" alt="" class="profile_picture">
          </div>
          <div class="col-3 profile-content">
            <p style="margin: 0;">Wang Sin-Hang</p>
            <p style="margin: 0;">mo85240@gmail.com</p>
          </div>
        </div>
        <div class="row row-line"></div>
        <div class="row copyright justify-content-center">
          <a href="https://github.com/tonyfdsa/TGA103EagleMuseum">2022 Eagle Museum Co.
            保留所有權利。</a>
        </div>
        <div class="row row-line"></div>
      </div>
    </div>

			<!-- jQuery 位置 -->
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.js"></script>
			<!-- 模板js匯入 位置 -->
			<!-- <script src="./workJS/Template .js"></script> -->
			<script>
				
	

			</script>
			<script>
				//1. 預設值 : 寫死在元素上的src
				//2. 點擊修改圖片
				document.getElementById("news").addEventListener("click",function(){
// 					alert(document.getElementById("mainPhoto").src);
					document.getElementById("mainPhoto").src ="./img/00000627.jpg"
// 					alert(document.getElementById("mainPhoto").src);
				});
				document.getElementById("actives").addEventListener("click",function(){
// 					alert(document.getElementById("mainPhoto").src);
					document.getElementById("mainPhoto").src ="./img/00000607.jpg"
// 					alert(document.getElementById("mainPhoto").src);
				});

				document.getElementById("newproduct").addEventListener("click",function(){
					document.getElementById("mainproduct").src ="./img/NPG-banner.jpg"
				});
				document.getElementById("hotproduct").addEventListener("click",function(){
					document.getElementById("mainproduct").src ="./img/MY HARVEST JOURNEY_banner.jpg"
				});

			</script>

			<script>
				 // 每個月的名稱
				 const month_names = ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', ' 十月', '十一月', '十二月'] ;
				// 設定閏月的規則 https://xiwan.io/archive/most-efficient-leap-year-algorithm.html

				//是否是閏年
				const isLeapYear = (year) => {
					return (year % 4 === 0 && year % 100 !== 0 && year % 400 !== 0) || (year % 100 === 0 && year % 400 === 0)
				}
				// 抓閏月
				const getFebDays = (year) => {
					return isLeapYear(year) ? 29 : 28
				}

				// 產生日歷區塊
				const generateCalendar = (month, year ,periodDate) => {
					let calendar = document.querySelector('.calendar');
					let calendar_days = calendar.querySelector('.calendar-days');
					let calendar_header_year = calendar.querySelector('#year');

					//每個月有幾天
					let days_of_month = [31, getFebDays(year), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31] ;
					calendar_days.innerHTML = '' ;

					//現在月份
					calendar.querySelector('#month-picker').innerHTML = `${month_names[month]}`;
					calendar_header_year.innerHTML = year;

					let first_day = new Date(year, month, 1);
					let days = days_of_month[month];
					let daysBolck = days + first_day.getDay() - 1; //所有日期區塊

					for (let i = 0; i <= daysBolck; i++) {
						let day = document.createElement('div');
						//過濾掉第一天前的區塊(ex: 10/1在是星期六，從星期六那格開始賦值)
						if (i >= first_day.getDay()) {
							let currentDate = new Date(year, month, i - first_day.getDay() + 1);
							day.classList.add('calendar-day-hover') //新增class
							day.innerHTML = i - first_day.getDay() + 1 ;
							// day.innerHTML += `<span></span>
							// 				<span></span>
							// 				<span></span>
							// 				<span></span>`;

							//和選到的日期相同，就加上mark
							for(let i =0 ; i<= periodDate.length-1 ; i++){
								if(periodDate[i].getTime() === currentDate.getTime()){
									day.classList.add('curr-date');
								}
							}

						}
						calendar_days.appendChild(day);
					}
				}

				//年份切換
				const cheangeYear = (currMonth,currYear,periodDate) => {
					document.querySelector('#prev-year').onclick = () => {
						--curr_year.value
						generateCalendar(curr_month.value, curr_year.value,periodDate);
					}

					document.querySelector('#next-year').onclick = () => {
						++curr_year.value
						generateCalendar(curr_month.value, curr_year.value,periodDate);
					}
				}

				//月份切換
				const changeMonth = (periodDate) => {
					// 抓calendar 元素
					let calendar = document.querySelector('.calendar');
					// 月份選擇的清單
					let month_list = calendar.querySelector('.month-list')

					month_names.forEach((e, index) => {
						let month = document.createElement('div');
						month.innerHTML = `<div data-month="${index}">${e}</div>`;
						month.querySelector('div').onclick = () => {
							month_list.classList.remove('show');
							curr_month.value = index;
							generateCalendar(index, curr_year.value,periodDate);
						}
						month_list.appendChild(month)
					});

					// 按下月份的按鈕時候會跳出各個月份
					calendar.querySelector('#month-picker').onclick = () => {
						month_list.classList.add('show')
					}
				};

				const getPeriodDate = (startDay,endDay) => {
					// let periodDate =[];
					//被選擇期間，9=> 10月,10 => 11月
					let periodDate = [new Date(2022, 9, 31),new Date(2022,9,12),new Date(2022,4,12)];


					return periodDate ;
				};

				//從後端取資料
				const getDate = () => {
					let respData = {
						code: 0,
						result:{
							exhibitionArticle:"",
							exhibitionStartDate:"",
							exhibitionEndDate:"",
							exhibitionImageBase64:"",
							exhibitionName:""	
						}
					};
					$.ajax({
					url:"http://localhost:8080/TGA103eagleMuseum/IndexExhibitionGetLastestExhibition",
					type:"GET",
					success:function(data){
						respData.code = data.code;
						respData.result.exhibitionArticle = data.result.exhibitionArticle ;
						respData.result.exhibitionStartDate = data.result.exhibitionStartDate;
						respData.result.exhibitionEndDate = data.result.exhibitionEndDate ;
						respData.result.exhibitionImageBase64 = data.result.exhibitionImageBase64 ;
						respData.result.exhibitionName = data.result.exhibitionName ;
						// console.log(respData);

				
					}
					});

					return respData;
				}
				
				//將後端取回來的資料替換到頁面上
				const change = (data) => {
					document.getElementById("text").innerText = data.result.exhibitionArticle;
					//更換圖片
					document.getElementById("activeImage").style.backgroundImage = `url(${data.result.exhibitionImageBase64})`;
				}

				//頁面載入完成後才執行
				window.addEventListener("load",function(){
					// let respData = getDate();
					//這是假資料
					let respData = {
								code: 200,
								result:{
									exhibitionArticle:"123",
									exhibitionStartDate:"",
									exhibitionEndDate:"",
									exhibitionImageBase64:"",
									exhibitionName:""	
								}
							};
					
					//如果成功且狀態碼是200才替換
					if(respData.code === 200 || respData.code ==="200"){
						change(respData);
					}

					
					let periodDate = getPeriodDate(respData.result.exhibitionStartDate,respData.result.exhibitionEndDate);
					
					let currDate = new Date();
					let curr_month = { value: currDate.getMonth() }
					let curr_year = { value: currDate.getFullYear() }

					generateCalendar(curr_month.value, curr_year.value,periodDate);
					cheangeYear(curr_month,curr_year,periodDate);
					changeMonth(periodDate);
					
				
					
					
			
					//開始時間

					 var Smonth = periodDate[1].getMonth();
					 var SDate = periodDate[1].getDate();

					 //結束時間

					 var Emonth = periodDate[1].getMonth();
					 var EDate = periodDate[0].getDate();

					 //月份相減

					 console.log(periodDate)
					 console.log(SDate)
						if((Emonth - Smonth) === 0){
							console.log("123")
							for(let i = SDate ; i < EDate ; i++){
							$(".calendar-day-hover").eq(i).attr("class" , "calendar-day-hover curr-date");
							}
						}
					});
					// })

				
			</script>
</body>
</html>
